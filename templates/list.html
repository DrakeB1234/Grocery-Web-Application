{% extends "layout.html" %}

<!-- head content -->
{% block title %}List Database{% endblock %}
{% block css %}<link rel="stylesheet" href="../static/css/list.css" />{% endblock %}
{% block js %}<script src="../static/js/list.js" defer></script>{% endblock %}

<!-- add username to nav -->
{% block username %}{{ user["username"] }}{% endblock %}

<!-- main content -->
{% block main %}

    <main class="container">
        {% if list %}
        <div class="container">
            <h1>List Database</h1>
        </div>
        {% else %}
        <div class="container" style="padding: 0;">
        </div>
        {% endif %}
        {% if list %}
            <div class="container-listTitle">
            <h1>Your Lists</h1>
            {% for i in list %}
                <form id="title" method="post" action="/list">
                    <button name="nameTitle" type="submit" value="{{ i['title'] }}" >{{ i['title'] }}</button>
                </form>
            {% endfor %}
                <i id="toggleAddTitle">+</i>
                <form id="formAddTitle" method="post" action="/list">
                    <input name="listTitle" type="text" placeholder="Title" pattern="^[a-zA-Z ]*$" title="Only use letters and spaces" autocomplete="off" autofocus />
                    <button type="submit" autofocus>Add</button>
                </form>
            </div>
            <script>
                // temp JS to toggle adding container for titles
                document.getElementById("formAddTitle").style.display = "none"
                document.getElementById("toggleAddTitle").addEventListener("click", e => {
                    container = document.getElementById("formAddTitle")
                    button = document.getElementById("toggleAddTitle")
                    if (container.style.display === "none"){
                        container.style.display = "flex"
                        button.innerHTML = "x"
                        return
                    }
                    container.style.display = "none"
                    button.innerHTML = "+"
                    return
                });
            </script>
        {% endif %}
        {% if listdata %}
        <a href="/list">Go back</a>
           <div id="container-list"></div>
            <!-- send list data -->
            <script type="text/javascript">
                var listdata = {{ listdata|tojson }}
            </script>
            </div>
        {% elif listdata == None %}
            <div class="container">
                <a href="/list">Go back</a>
                <div id="container-list">
                    <h1>EMPTY LIST</h1>
                </div>
            </div>
        {% endif %}
    </main>

{% endblock %}